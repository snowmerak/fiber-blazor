package main

import (
	"fmt"
	"github.com/snowmerak/fiber-blazor/blazor"
)

templ Calculator(data CalcData) {
	{{ binder := GetBindingOfCalcRequest() }}
	{{ result := binder.ID("result") }}
	<div class="p-6 max-w-sm mx-auto bg-white rounded-xl shadow-md space-y-4 border border-gray-200" id={ binder.ID("calculator").ID }>
		<h1 class="text-2xl font-bold text-gray-900">Calculator</h1>
		<div class="flex flex-col space-y-2">
			<label class="text-sm font-medium text-gray-700">Value A</label>
			<input
				type="number"
				{ binder.A.Attrs()... }
				class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>
		<div class="flex flex-col space-y-2">
			<label class="text-sm font-medium text-gray-700">Value B</label>
			<input
				type="number"
				{ binder.B.Attrs()... }
				class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>
		<button
			{ blazor.Post("/calculate").
				Target(result.Selector()).
				Include(binder.ID("calculator").Selector() + " input").
				Build()... }
			class="w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition duration-150"
		>
			Calculate
		</button>
		<div { result.Attrs()... } class="mt-4 p-4 bg-gray-50 rounded-md border border-gray-100">
			@Result(data)
		</div>
	</div>
}

templ Result(data CalcData) {
	<div class="text-lg font-semibold text-gray-800">
		Result: { fmt.Sprintf("%d", data.Sum) }
	</div>
}

